<%= title(t(".title")) %>

<%= render("inventories/buttons", :current => :shop) %>

<%= render('layouts/promo_block', :context => :shop) %>

<%= render('items/tabs', :groups => @item_groups, :current => @current_group) %>

<%= will_paginate @items %>

<table id="item_list" cellspacing="0" cellpadding="0">
  <% @items.each do |item| %>
    <%= render(item) %>
  <% end %>
</table>

<% if @next_item %>
  <div id="next_item">
    <%= t(".next_item",
          :level => content_tag(:span, @next_item.level, :class => :level),
          :group => content_tag(:span, @next_item.item_group.name.mb_chars.downcase, :class => :weapon)
        ).html_safe %>
  </div>
<% end %>

<%= will_paginate @items %>

<% dom_ready do %>

  $(".amount").change(function(){
    var amount = $(this).val();
    var data = $.parseJSON($(this).attr('data-options'));
    
    if(data['basic_price'] > 0)
      $("#item_" + data['id'] + " .requirements .basic_money .value").html(data['basic_price'] * amount);
      
    if(data['vip_price'] > 0)
      $("#item_" + data['id'] + " .requirements .vip_money .value").html(data['vip_price'] * amount);  
  });
<% end %>
