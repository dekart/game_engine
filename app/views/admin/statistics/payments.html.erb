<%= admin_title(t('.title'))%>

<%= render("controls") %>

<table id="vip_money_operations">
  <tr>
    <td>
      <div class="section">
        <h2><%= t(".reference_types") %></h2>

        <table class="data">
          <tr>
            <th><%= t(".reference_type") %></th>
            <th><%= t(".users_amount") %></th>
            <th><%= t(".payments_amount") %></th>
            <th><%= t(".payments_per_user") %></th>
            <th><%= t(".paying_amount") %></th>
            <th><%= t(".payments_per_paying") %></th>
          </tr>
        
          <% @result.each do |reference, users_amount, paying_amount, payments_amount| %>
            <tr class="<%= 'separator' if users_amount == 50 %>">
              <td><%= reference.blank? ? "-" : reference.humanize %></td>

              <td><%= users_amount %></td>

              <td><%= payments_amount %></td>

              <td><%= users_amount > 0 ? (payments_amount.to_f / users_amount).round(2) : 0 %></td>

              <td><%= paying_amount %></td>

              <td><%= paying_amount > 0 ? (payments_amount.to_f / paying_amount).round(2) : 0 %></td>
            </tr>
          <% end %>
        </table>
      </div>
    </td>
  </tr>
</table>
