<% content_tag_for(:tr, mission) do %>
  <td class="info">
    <% if mission.image? %>
      <div class="image"><%= image_tag(mission.image.url(:small)) %></div>
    <% end %>
      
    <div class="name"><%= mission.name %></div>
    <div class="description"><%= mission.description %></div>
    
    <div class="controls">
      <%= link_to_remote(button(:fulfill),
            :url    => fulfill_mission_path(mission),
            :update => :result,
            :html   => {:class => "fulfill button"}
          ) unless !mission.repeatable? && current_character.missions.completed?(mission) %>
    </div>

    <div class="progress" id="<%= dom_id(mission, :progress) %>">
      <%= mission_progress(current_character, mission) %>
    </div>
  </td>
  <td class="details">
    <div class="payouts">
      <h3><%= Mission.human_attribute_name("payouts") %></h3>
      
      <%= payout(:experience, mission.experience) %>
      <%= payout(:basic_money, mission_money(mission)) %>
      <%= payout_list(mission.payouts, :add, :preview) %>
    </div>

    <div class="requirements">
      <h3><%= Mission.human_attribute_name("requirements") %></h3>
      
      <%= attribute_requirement(:energy, mission.ep_cost, current_character.ep >= mission.ep_cost) %>

      <%= requirement_list(mission.requirements) %>
    </div>
  </td>
<% end %>