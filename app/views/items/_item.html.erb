<% content_tag_for :tr, item, :class => item.availability do %>
  <td class="picture"><%= item_image(item, :small) %></td>
  <td class="info">
    <div class="name"><%= item.name %></div>
    <div class="description"><%= item.description %></div>
    
    <% if item.left %>
      <div class="sale_limit">
        <%= raw t(".sale_limit",
              :amount => content_tag(:strong, item.left)
            ) %>
      </div>
    <% end %>

    <% if item.available_till %>
      <div class="time_limit">
        <%= raw t(".time_limit",
              :amount => content_tag(:strong, "", :id => dom_id(item, :timer))
            ) %>
      </div>

      <% dom_ready do %>
        Timer.start('<%= dom_id(item, :timer) %>', <%= item.time_left %>)
      <% end %>
    <% end %>
  </td>
  <td class="payouts">
    <%= payout(:attack, "+%d" % item.attack) if item.attack > 0 %>
    <%= payout(:defence, "+%d" % item.defence) if item.defence > 0 %>
    
    <% item.effects.each do |effect| %>
      <%= payout(effect.name, "+%d" % effect.value, :label => t("effects.#{effect.name}.name")) %>
    <% end %>
  </td>
  <td class="requirements">
    <%= attribute_requirement(:basic_money, number_to_currency(item.basic_price)) if item.basic_price > 0 %>
    <%= vip_money_requirement(item.vip_price) if item.vip_price > 0 %>
  </td>
  <td class="controls">
    <% form_tag "", :class => :clearfix do %>
      <%= amount_select_tag %>

      <%= link_to_remote(button(:buy),
            :url    => inventories_url(:item_id => item.id, :canvas => false),
            :update => :result,
            :with   => "$(this).parent('form').serialize()",
            :html   => {:class => "buy button"}
          ) %>
    <% end %>
  </td>
<% end %>