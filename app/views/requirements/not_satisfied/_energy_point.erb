<% requirement(requirement.name, false) do %>
  <% if current_character.energy_points >= requirement.value %>
    <p>
      <%= t(".restorable.message",
            :required_value => content_tag(:strong, requirement.value),
            :restore_time   => content_tag(:strong, (current_character.ep_restore_time(requirement.value) / 1.minute).ceil)
          ).html_safe %>
    </p>

    <p>
      <%= t(".restorable.get_more",
            :premium_page => link_to(t(".premium_page"), premium_path)
          ).html_safe %>
    </p>

    <div class="buttons">
      <%= link_to_remote(button(:refill), 
            :url    => refill_dialog_premium_path(
              :type => :refill_energy, 
              :vip_money => Setting.i(:premium_energy_price)
            ),
            :update => :ajax,
            :html   => {:class => "premium button"}
          ) %>
    </div>
  <% else %>
    <p>
      <%= t(".low_base_level.message",
            :premium_page => link_to(t(".premium_page"), premium_path)
          ).html_safe %>
    </p>

    <div class="buttons">
      <%= link_to(button(:get_points), premium_path,
            :class => "premium button"
          ) %>
    </div>
  <% end %>
<% end %>
