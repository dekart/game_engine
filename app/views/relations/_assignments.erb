<h2><%= t(".title") %></h2>

<div id="character_assignments" cellspacing="0" cellpadding="0">
  <% Assignment::ROLES.each do |role| %>
    <div class="context">
      <b><%= t("assignments.roles.#{role}.title") %></b>

      <% if assignment = current_character.assignments.by_role(role) %>
        <div class="controls">
          <%= link_to(button(:demote), assignment_path(assignment),
                :method   => :delete,
                :class    => "demote button",
                :confirm  => t(".buttons.demote_confirm")
              ) %>
        </div>

        <%= render :partial => assignment %>
      <% else %>
        <div class="controls">
          <%= link_to_remote(button(:promote),
                :url    => new_character_assignment_url(current_character, :role => role, :canvas => false),
                :method => :get,
                :update => :result,
                :html   => {:class => "promote button"}
              ) %>
        </div>
      
        <div class="description">
          <%= t("assignments.roles.#{role}.description") %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>