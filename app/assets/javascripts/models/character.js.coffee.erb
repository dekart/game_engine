window.Character = class extends Spine.Model
  @configure 'Character', 'basic_money', 'vip_money', 'points',
    'level', 'experience', 'next_level_experience', 'level_progress_percentage',
    'energy_points', 'ep', 'time_to_ep_restore',
    'stamina_points', 'sp', 'time_to_sp_restore',
    'health_points', 'hp', 'time_to_hp_restore',
    'notifications_count'

  @upgradeableAttributes: <%= Character::UPGRADABLE_ATTRIBUTES.to_json.html_safe %>

  @update: (values)->
    character = @first()

    if character
      character.updateAttributes(values)
    else
      @create(values)

  @updateFromRemote: ()->
    $.getJSON('/character_status/?rand=' + Math.random(), (response)=>
      @.update(response)
    )

