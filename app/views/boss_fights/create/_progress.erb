<table class="details progress">
  <tr>
    <td class="character">
      <h1><%= character_name(fight.character, :capitalize => true) %></h1>

      <%= character_picture(fight.character, :size => :small) %>

      <%= character_health_bar(fight.character) %>

      <div class="message">
        <%= raw t(".messages.character",
              :attacker => content_tag(:span, character_name(fight.character, :capitalize => true),
                :class => :attacker
              ),
              :victim   => content_tag(:span, fight.boss.name, :class => :victim),
              :damage   => content_tag(:span, fight.boss_hp_loss, :class => :damage)
            ) %>
      </div>
    </td>
    <td>
      <div class="vs">VS.</div>

      <div class="buttons">
        <%= link_to_remote(button(:attack),
              :url    => boss_fight_url(fight, :canvas => false),
              :method => :put,
              :update => :result,
              :html   => {:class => "attack button"}
            ) %>
      </div>

      <% if fight.time_limit? %>
        <div class="timer">
          <%= raw t(".time_left", :value => content_tag(:span, "", :id => :boss_fight_time_left)) %>
        </div>

        <% content_for :script do %>
          Timer.start('boss_fight_time_left', <%= fight.time_left %>)
        <% end %>
      <% end %>
    </td>
    <td class="boss">
      <h1><%= fight.boss.name %></h1>

      <%= image_tag(fight.boss.image.url(:small)) if fight.boss.image? %>

      <%= boss_fight_health_bar(fight) %>

      <div class="message">
        <%= raw t(".messages.boss",
              :attacker => content_tag(:span, fight.boss.name, :class => :attacker),
              :victim   => content_tag(:span, character_name(fight.character), :class => :victim),
              :damage   => content_tag(:span, fight.character_hp_loss, :class => :damage)
            ) %>
      </div>
    </td>
  </tr>
</table>