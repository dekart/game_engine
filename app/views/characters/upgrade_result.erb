<div id="upgrade_result">
  <% if @success %>
    <p>
      <%= raw t(".messages.success",
            :attribute  => Character.human_attribute_name(params[:attribute]),
            :number     => content_tag(:b, current_character.attributes[params[:attribute]])
          ) %>
    </p>
  <% else %>
    <p>
      <%= t(".messages.not_enough_points", :attribute => Character.human_attribute_name(params[:attribute])) %>
    </p>
  <% end %>
</div>

<% content_for :script do %>
  $('upgrade_<%= params[:attribute] %>').setTextValue('<%= current_character.attributes[params[:attribute]] %>');

  <% if current_character.points == 0 %>
    Character.onUpgradeComplete();
  <% else %>
    $('upgrade_points').setTextValue('<%= current_character.points %>');
  <% end %>

  $('result').show();
<% end %>